<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="fr.jetdev.jade.repositories.AddressDao">

    <resultMap id="addressMap" type="Address">
        <id property="id" column="id"/>
        <result property="line1" column="line_1"/>
        <result property="line2" column="line_2"/>
        <result property="line3" column="line_3"/>
        <result property="line4" column="line_4"/>
        <result property="city" column="city"/>
        <result property="postalCode" column="postcode"/>
        <result property="country" column="country"/>
        <result property="countryProvince" column="county_province"/>
        <result property="otherDetails" column="other_address_details"/>
    </resultMap>

    <delete id="clearAddressById" parameterType="Integer">
        DELETE FROM address WHERE id = #{id}
    </delete>

    <insert id="createAddress" parameterType="Address" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        INSERT INTO address (line_1, line_2, line_3, line_4, city, postcode, country, county_province, other_address_details)
        VALUES
        (#{line1}, #{line2}, #{line3}, #{line4}, #{city}, #{postalCode}, #{country}, #{countryProvince}, #{otherDetails})
    </insert>

    <select id="fetchAll" resultMap="addressMap">
        SELECT * FROM address
    </select>

</mapper>